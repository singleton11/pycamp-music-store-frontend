<template>
    <ul class="pagination pagination-lg justify-content-center"
        v-show="countItems">
      <!-- First page -->
      <li class="page-item"
          :class="{disabled: isFirstPage}">
        <a class="page-link"
           href="#"
           @click.prevent="changePage(1)">&laquo;</a>
      </li>

      <!-- range of pages -->
      <li class="page-item"
          v-for="pageNum in rangePages"
          :key="pageNum"
          :class="{active: pageNum === currentPage}">
        <a class="page-link"
           href="#"
           @click.prevent="changePage(pageNum)">{{ pageNum }}</a>
      </li>

      <!-- Last page -->
      <li class="page-item"
          :class="{disabled: isLastPage}">
        <a class="page-link"
           href="#"
           @click.prevent="changePage(countPages)">&raquo;</a>
      </li>
    </ul>
</template>

<script>
export default {
  props: [
    'countItems',
    'itemsPerPage',
    'currentPage',
  ],
  /**
   * Define data model properties available for the component
   */
  data() {
    return {
      // the number of pages for each side from the current
      pagesFromOneSide: 2,
    };
  },
  computed: {
    /**
     * Get count of pages
     *
     * @returns {number}
     */
    countPages() {
      return Math.ceil(this.countItems / this.itemsPerPage);
    },
    /**
     * Check, that current page is first page
     *
     * @returns {boolean}
     */
    isFirstPage() {
      return this.currentPage === 1;
    },
    /**
     * Check, that current page is last page
     *
     * @returns {boolean}
     */
    isLastPage() {
      return this.currentPage === this.countPages;
    },
    /**
     * Get range of pages
     *
     * @returns {Array} - range of pages, for example if pagesFromOneSide=2 then
     *   page 1/10: [1, 2, 3]
     *   page 6/10: [4, 5, 6, 7, 8]
     *   page 9/10: [7, 8, 9, 10]
     */
    rangePages() {
      const a = [];
      const start = Math.max(1, this.currentPage - this.pagesFromOneSide);
      const stop = Math.min(
        this.countPages,
        this.currentPage + this.pagesFromOneSide
      );

      for (let i = start; i <= stop; i++) {
        a.push(i);
      }

      return a;
    },
  },
  methods: {
    /**
     * Method for change page and emit event to parent
     *
     * @param page - selected page
     */
    changePage(page) {
      this.$emit('changePage', page);
    },
  },
};
</script>
